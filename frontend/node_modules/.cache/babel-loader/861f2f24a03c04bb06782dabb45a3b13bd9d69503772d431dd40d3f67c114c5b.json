{"ast":null,"code":"import { REDUX_SET_USERDATA } from \"../actions/actionTypes\";\nimport { put } from \"redux-saga/effects\";\nimport { tostMessageCheck } from \"./ToastMessageCheck\";\nimport { useDispatch } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nexport function userLogin(_ref) {\n  let {\n    payload\n  } = _ref;\n  return function* () {\n    console.log(payload);\n    const {\n      email,\n      password\n    } = payload;\n    let data = yield fetch(\"http://localhost:5000/login\", {\n      method: \"post\",\n      body: JSON.stringify({\n        email,\n        password\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    data = yield data.json();\n    console.warn(\"saga data\", data);\n    if (data.result) {\n      yield put({\n        type: REDUX_SET_USERDATA,\n        data\n      });\n      tostMessageCheck({\n        body: data.body,\n        isSucces: true\n      });\n    } else {\n      tostMessageCheck({\n        body: data.body,\n        isSucces: false\n      });\n    }\n  }();\n}\nexport function* userCheck() {\n  let result = yield fetch(\"http://localhost:5000/check\", {\n    method: \"post\",\n    headers: {\n      authorization: `bearer ${JSON.parse(localStorage.getItem(\"token\"))}`\n    }\n  });\n  result = yield result.json();\n  console.warn(\"sonuc\", result.result);\n  if (result.result) {\n    console.log(\"true dondu\");\n    let user = JSON.parse(localStorage.getItem(\"user\"));\n    let auth = JSON.parse(localStorage.getItem(\"token\"));\n    let data = {\n      user,\n      auth,\n      lifesycle: true,\n      result: result.result\n    };\n    console.warn(\"data is here \", data);\n    yield put({\n      type: REDUX_SET_USERDATA,\n      data\n    });\n  } else {\n    console.warn(\"girdi\");\n    localStorage.setItem(\"lifesycle\", false);\n  }\n}\nexport function userSignUp(_ref2) {\n  let {\n    data\n  } = _ref2;\n  return function* () {\n    const {\n      email,\n      password,\n      ipAddress\n    } = data;\n    let result = yield fetch(\"http://localhost:5000/signup\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        email,\n        password,\n        ipAddress\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    result = yield result.json();\n    console.warn(\"saga result \", result);\n    if (result.result) {\n      yield put({\n        type: REDUX_SET_USERDATA,\n        data\n      });\n      tostMessageCheck({\n        body: result.body,\n        isSuccess: true\n      });\n    } else {\n      tostMessageCheck({\n        body: result.body,\n        isSuccess: false\n      });\n    }\n  }();\n}","map":{"version":3,"names":["REDUX_SET_USERDATA","put","tostMessageCheck","useDispatch","useNavigate","userLogin","_ref","payload","console","log","email","password","data","fetch","method","body","JSON","stringify","headers","json","warn","result","type","isSucces","userCheck","authorization","parse","localStorage","getItem","user","auth","lifesycle","setItem","userSignUp","_ref2","ipAddress","isSuccess"],"sources":["C:/Users/e-ars/Documents/GitHub/apply4jobv11/frontend/src/redux/saga/UserConnection.js"],"sourcesContent":["import { REDUX_SET_USERDATA } from \"../actions/actionTypes\";\r\nimport { put } from \"redux-saga/effects\";\r\nimport { tostMessageCheck } from \"./ToastMessageCheck\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport function* userLogin({ payload }) {\r\n  console.log(payload);\r\n  const { email, password } = payload;\r\n  let data = yield fetch(\"http://localhost:5000/login\", {\r\n    method: \"post\",\r\n    body: JSON.stringify({ email, password }),\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  });\r\n  data = yield data.json();\r\n  console.warn(\"saga data\", data);\r\n  if (data.result) {\r\n    yield put({ type: REDUX_SET_USERDATA, data });\r\n    tostMessageCheck({ body: data.body, isSucces: true });\r\n  } else {\r\n    tostMessageCheck({ body: data.body, isSucces: false });\r\n  }\r\n}\r\n\r\nexport function* userCheck() {\r\n  let result = yield fetch(\"http://localhost:5000/check\", {\r\n    method: \"post\",\r\n    headers: {\r\n      authorization: `bearer ${JSON.parse(localStorage.getItem(\"token\"))}`,\r\n    },\r\n  });\r\n  result = yield result.json();\r\n  console.warn(\"sonuc\", result.result);\r\n  if (result.result) {\r\n    console.log(\"true dondu\");\r\n    let user = JSON.parse(localStorage.getItem(\"user\"));\r\n    let auth = JSON.parse(localStorage.getItem(\"token\"));\r\n    let data = { user, auth, lifesycle: true, result: result.result };\r\n    console.warn(\"data is here \", data);\r\n    yield put({ type: REDUX_SET_USERDATA, data });\r\n  } else {\r\n    console.warn(\"girdi\");\r\n    localStorage.setItem(\"lifesycle\", false);\r\n  }\r\n}\r\n\r\nexport function* userSignUp({ data }) {\r\n  const { email, password, ipAddress } = data;\r\n  let result =  yield fetch(\"http://localhost:5000/signup\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ email, password, ipAddress }),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n  result = yield result.json();\r\n  console.warn(\"saga result \", result);\r\n  if (result.result) {\r\n    yield put({ type: REDUX_SET_USERDATA, data });\r\n    tostMessageCheck({ body: result.body, isSuccess: true });\r\n  } else {\r\n    tostMessageCheck({ body: result.body, isSuccess: false });\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}